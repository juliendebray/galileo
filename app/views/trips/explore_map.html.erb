<style type="text/css">
  html { height: 100%; overflow: hidden; }
  body { height: 100%; margin: 0; padding: 0; overflow: hidden }
  #map-container { height: 100% }
</style>
<div id="map-navigation-menu" class="hidden-xs">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-2">
        <div class="btn-group">
          <a id= "sort-experiences" class="btn btn-block btn-info dropdown-toggle no-border" data-toggle="dropdown" href="#">
            Trier par note moyenne <span class="caret"></span>
          </a>
          <ul class="dropdown-menu dropdown-titles">
            <li><a id="score" class="sort-by-btn active" href="#">Trier par note moyenne </a></li>
            <li><a id="popularity" class="sort-by-btn" href="#">Trier par popularité </a></li>
          </ul>
          </div>
      </div>
      <div class="col-sm-10">
        <div class="btn-group btn-group-block btn-group-justified" role="group" aria-label="Category selection">
          <a id="must" href="#" class="btn no-border btn-default category-btn" role="button">
            <i class="fa fa-star"></i>
            Incontournables
          </a>
          <a id="otbt" href="#" class="btn no-border btn-default category-btn" role="button">
            <i class="fa fa-compass"></i>
            Hors des sentiers battus
          </a>
          <a id="relax" href="#" class="btn no-border btn-default category-btn" role="button">
            <i class="fa fa-glass"></i>
            Détente
          </a>
          <a id="culture" href="#" class="btn no-border btn-default category-btn" role="button">
            <i class="fa fa-university"></i>
            Culture
          </a>
          <a id="sport" href="#" class="btn no-border btn-default category-btn" role="button">
            <i class="fa fa-bicycle"></i>
            Sport
          </a>
        </div>
      </div>
    </div>
</div>
</div>
<div id="sidebar-container">
  <h1>side bar</h1>
</div>
<div id="map-container" class="hidden-xs">
</div>
<%= content_for(:before_js) do %>
  <%= javascript_include_tag "https://maps.google.com/maps/api/js?sensor=false&libraries=places&amp;key=AIzaSyCf77HD5LQkLbAcZWkBXKj-DLkXQJ9vHEc" %>
  <%= javascript_include_tag "https://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"%>
  <%= javascript_include_tag "//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js" %>
<% end %>
<% content_for(:after_js) do %>
  <script>
    $(document).on('ready', function() {
      var mapOptions = {
        center: new google.maps.LatLng(0, 0),
        zoom: 1,
        disableDoubleClickZoom: false,
        panControl: false,
        zoomControl: true,
        zoomControlOptions: {
          style: google.maps.ZoomControlStyle.SMALL
        }
      };
      handler = Gmaps.build('Google', { markers: { maxRandomDistance: 5 } });
      handler.buildMap({provider: mapOptions, internal: {id: 'map-container'}}, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        setExperienceInfowindowForGlobalMap(<%= raw @markers.to_json %>)
      });
    });
  </script>
<% end %>